# To Do

## Current

- [ ] limit exported symbols: https://cristianadam.eu/20190501/bundling-together-static-libraries-with-cmake/
- [ ] gather `nm -D --defined-only libpassgen.so` output for autorelease scripts
- [ ] rename passgen pattern segment to passgen segment
- [ ] make symbols check work for shared library
- [ ] document `CMAKE_UNITY_BUILD` and adds to CI build
- [ ] remove special character handling in favour of (:english:) and [:english:] type syntax.
- [ ] version releases with signed tags, generate versions from that
- [ ] generate changelog page
- [ ] extensive benchmarks
- [ ] simplify data structures
- [ ] character class subtraction <https://www.regular-expressions.info/charclasssubtract.html>
- [ ] character class intersection <https://www.regular-expressions.info/charclassintersect.html>
- [ ] add character classes like `[::emoji::]` or `[::english::]`, parsed from `unicode-data` <https://www.regular-expressions.info/posixbrackets.html>, or `(:english:)` for wordlists?
- [ ] add regex subroutines <https://www.regular-expressions.info/subroutine.html>, maybe recursion?
- [ ] add randomness distribution options (normal distribution as `a{normal(4, 2)}`, give probabilities for each option `a{0:0.2;1:0.3;2:0.5}`).
- [ ] add parse tree conversion to regex for testing?
- [ ] add backreference support (with `\k` or to group)
- [ ] optional features: gzip wordlist, json, debug
- [ ] add building support for meson/makefile/other build systems
- [ ] parsing error backtrace (using parsing stack)
- [ ] internationalisation (maybe)
- [ ] speed up generation (caching and batched encode)
- [ ] benchmark (simple)
- [ ] different syntax for special groups (maybe)
- [ ] disallow escaped when not necessary
- [ ] wordlist support (gzipped)
- [ ] markov chain loading support
- [ ] improve const-correctness (mark everything as const that is const).
- [ ] write more documentation (in docs/, manual, paper, update man page).
    - [ ] 60% documentation coverage
    - [ ] 70% documentation coverage
    - [ ] 80% documentation coverage
    - [ ] 90% documentation coverage
    - [ ] 90% documentation coverage
- [ ] document base API
- [ ] implement static memory methods
- [ ] make pronounceable take simple pointer to markov structure
- [ ] add static assertions to check size of structs
- [ ] rearrange struct members to potentially save space?
- [ ] think about the syntax of special characters
- [ ] json generation for all data structures (autogenerated with pycparser?)
- [ ] remove legacy code
    - [ ] `pattern.c`
    - [ ] `pattern_random.c`
    - [ ] `pattern_presets.c`
- [ ] review code coverage and perhaps add more tests
    - [ ] 90% test coverage
    - [ ] 95% test coverage
    - [ ] 98% test coverage
    - [ ] 99% test coverage
- [ ] add or think about memory handling
- [ ] reimplement memory handling, benchmark to make sure it doesn't affect performance too much
- [ ] adapt generation for new data structures
- [ ] write benchmark for new parser
- [ ] try changing parser state stack to linked list?
- [ ] implement stack depth limiting for new parser (as separate method)
- [ ] implement code profiling

## Ideas

- make the data structures pretty. they should be maintainable, and optionally
  allow for JSON output for debugging
- write benchmarks to make sure that the parser is quick. that's the whole
  reason this is written in C, anyways.
- write a fuzzing backend, using AFL or the like, to ensure there are no bugs
  that can crash the parser.
